<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Google Cloud Platform App | Badrap docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Badrap documentation site">
    
    <link rel="preload" href="/assets/css/0.styles.b2fdc9f3.css" as="style"><link rel="preload" href="/assets/js/app.2180d51d.js" as="script"><link rel="preload" href="/assets/js/2.0369854c.js" as="script"><link rel="preload" href="/assets/js/5.adc7a5bc.js" as="script"><link rel="prefetch" href="/assets/js/10.7cec7822.js"><link rel="prefetch" href="/assets/js/11.419db76a.js"><link rel="prefetch" href="/assets/js/12.c2b69d3b.js"><link rel="prefetch" href="/assets/js/13.7c9dd7d1.js"><link rel="prefetch" href="/assets/js/14.a2232a97.js"><link rel="prefetch" href="/assets/js/15.3eba5001.js"><link rel="prefetch" href="/assets/js/16.fa73d8cc.js"><link rel="prefetch" href="/assets/js/17.b6e31032.js"><link rel="prefetch" href="/assets/js/18.7aaa9965.js"><link rel="prefetch" href="/assets/js/19.c259119b.js"><link rel="prefetch" href="/assets/js/20.6d8b1346.js"><link rel="prefetch" href="/assets/js/21.d27ac6e0.js"><link rel="prefetch" href="/assets/js/22.2f410628.js"><link rel="prefetch" href="/assets/js/23.56a67df7.js"><link rel="prefetch" href="/assets/js/24.076743f1.js"><link rel="prefetch" href="/assets/js/25.567fc824.js"><link rel="prefetch" href="/assets/js/26.1a56c2ea.js"><link rel="prefetch" href="/assets/js/27.afd3be7c.js"><link rel="prefetch" href="/assets/js/28.f0843364.js"><link rel="prefetch" href="/assets/js/29.2c1a010c.js"><link rel="prefetch" href="/assets/js/3.744684b2.js"><link rel="prefetch" href="/assets/js/30.48dc7cde.js"><link rel="prefetch" href="/assets/js/31.30a8e18f.js"><link rel="prefetch" href="/assets/js/32.9446c0a7.js"><link rel="prefetch" href="/assets/js/33.c3ebe2f8.js"><link rel="prefetch" href="/assets/js/34.5ce1f442.js"><link rel="prefetch" href="/assets/js/35.2cbbb517.js"><link rel="prefetch" href="/assets/js/36.0b3d269f.js"><link rel="prefetch" href="/assets/js/37.d110e398.js"><link rel="prefetch" href="/assets/js/38.2b49e56a.js"><link rel="prefetch" href="/assets/js/39.46dd2606.js"><link rel="prefetch" href="/assets/js/4.1a65521b.js"><link rel="prefetch" href="/assets/js/40.57c072ae.js"><link rel="prefetch" href="/assets/js/41.cceee13c.js"><link rel="prefetch" href="/assets/js/42.41cb3c13.js"><link rel="prefetch" href="/assets/js/43.eb5ebcf4.js"><link rel="prefetch" href="/assets/js/44.14ff9cfc.js"><link rel="prefetch" href="/assets/js/45.d551fcaa.js"><link rel="prefetch" href="/assets/js/46.8f5d3c58.js"><link rel="prefetch" href="/assets/js/47.45877206.js"><link rel="prefetch" href="/assets/js/48.b938d242.js"><link rel="prefetch" href="/assets/js/49.90e2ce03.js"><link rel="prefetch" href="/assets/js/50.acc221c2.js"><link rel="prefetch" href="/assets/js/51.5f7062af.js"><link rel="prefetch" href="/assets/js/52.f903930a.js"><link rel="prefetch" href="/assets/js/53.eb95580b.js"><link rel="prefetch" href="/assets/js/54.7cf68176.js"><link rel="prefetch" href="/assets/js/55.597db9b0.js"><link rel="prefetch" href="/assets/js/56.b6c0dfc8.js"><link rel="prefetch" href="/assets/js/57.e31f776c.js"><link rel="prefetch" href="/assets/js/58.82a091b5.js"><link rel="prefetch" href="/assets/js/59.da80ab35.js"><link rel="prefetch" href="/assets/js/6.ca7b7f2e.js"><link rel="prefetch" href="/assets/js/60.e1e7240b.js"><link rel="prefetch" href="/assets/js/61.6e9630a6.js"><link rel="prefetch" href="/assets/js/62.55da8418.js"><link rel="prefetch" href="/assets/js/63.413c95ac.js"><link rel="prefetch" href="/assets/js/64.54ff4b66.js"><link rel="prefetch" href="/assets/js/65.c28a741c.js"><link rel="prefetch" href="/assets/js/66.734ed35e.js"><link rel="prefetch" href="/assets/js/67.71c2251d.js"><link rel="prefetch" href="/assets/js/68.df312ede.js"><link rel="prefetch" href="/assets/js/69.cca15685.js"><link rel="prefetch" href="/assets/js/7.5cd6170d.js"><link rel="prefetch" href="/assets/js/70.631ac283.js"><link rel="prefetch" href="/assets/js/71.a400b85c.js"><link rel="prefetch" href="/assets/js/8.6692da12.js"><link rel="prefetch" href="/assets/js/9.fc05f175.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b2fdc9f3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/badrap-logo.png" alt="Badrap docs" class="logo"> <span class="site-name can-hide">Badrap docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://badrap.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  badrap.io
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/apps/gcp.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/fi/" class="nav-link">
  Suomi
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://badrap.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  badrap.io
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/apps/gcp.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/fi/" class="nav-link">
  Suomi
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Google Cloud Platform App</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/apps/gcp.html#i-am-the-owner-of-the-gcp-project" class="sidebar-link">I am the owner of the GCP project</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/apps/gcp.html#i-am-the-badrap-user" class="sidebar-link">I am the Badrap user</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/apps/gcp.html#uninstalling-the-app" class="sidebar-link">Uninstalling the app</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="google-cloud-platform-app"><a href="#google-cloud-platform-app" class="header-anchor">#</a> Google Cloud Platform App</h1> <p>This app allows you to synchronize your Google Cloud Platform (GCP) assets into Badrap and receive security notifications about them. If you are not the owner or your organization's GCP project or projects, you will need help from the owner.</p> <p>First, the owner of your organization's GCP project(s) creates a service account, downloads a key for it, and delivers the key to the Badrap GCP app user. Badrap GCP app user loads the key to the Badrap GCP app. Once installed, the app maintains a list of your organization's assets and add those assets under your Badrap user account. Namely:</p> <ul><li>public IP-addresses from your GCP installation</li> <li>domain names, if GCP also hosts your DNS</li> <li>public IP-addresses of your Google Cloud SQL instances</li> <li>public IP-addresses of your Google Kubernetes Engine clusters' control planes</li></ul> <h2 id="i-am-the-owner-of-the-gcp-project"><a href="#i-am-the-owner-of-the-gcp-project" class="header-anchor">#</a> I am the owner of the GCP project</h2> <p>Create a service account with limited access:</p> <ol><li>Go to <a href="https://console.cloud.google.com/iam-admin/serviceaccounts" target="_blank" rel="noopener noreferrer">https://console.cloud.google.com/iam-admin/serviceaccounts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (log in if necessary).</li> <li>Select the project which public assets are going to be shared</li> <li>Click on the <strong>Create service account</strong> button.</li></ol> <div style="text-align:center;"><img src="/assets/img/gcp-10-create-service-account.6fbda841.png"></div> <ol start="4"><li>On the <em>Service account details</em> area, give the account any name you want (for example &quot;Service account for badrap.io&quot;).
<ul><li>Optionally add a description so you can remember what this service account is for.</li> <li>Click the <strong>Create</strong> button.</li></ul></li></ol> <div style="text-align:center;"><img src="/assets/img/gcp-20-describe-create.5bef40fc.png" style="max-width:95%;width:480px;"></div> <ol start="5"><li>On the <em>Service account permissions</em> area, select the role <em>Compute Viewer</em>.
<ul><li>Click <strong>Add another role</strong> and add the <em>DNS Reader</em> role.</li> <li>Click <strong>Add another role</strong> and add the <em>Cloud SQL Viewer</em> role.</li> <li>Click <strong>Add another role</strong> and add the <em>Kubernetes Engine Cluster Viewer</em> role.</li> <li>Click the <strong>Continue</strong> button.</li></ul></li></ol> <div style="text-align:center;"><img src="/assets/img/gcp-30-grant-roles.1889f123.png" style="max-width:95%;width:480px;"></div> <ol start="6"><li><p>On the <em>Grant users access to this service account</em> area, leave the fields empty and click the <strong>Done</strong> button. You will be taken back to the project's <em>Service accounts</em> page.</p></li> <li><p>On the <em>Service accounts</em> page, find the row for the account you created, and click the three dots on the right.</p> <ul><li>Click <strong>Manage keys</strong>.</li> <li>From the <strong>Add key</strong> drop-down menu, select <strong>Create new key</strong>.</li> <li>When the key creation dialog opens, select <strong>JSON</strong> as the key type and click <strong>Create</strong>.</li> <li>The key file is downloaded to your computer.</li> <li>Close the dialog by clicking the <strong>Close</strong> button.</li></ul></li></ol> <div style="text-align:center;"><img src="/assets/img/gcp-40-create-key.c62c1d22.png"></div> <p>If you completed this process on behalf of someone else, deliver them the JSON key file containing the key to the service account. Delete the JSON key file from your local storage, once you don't need it anymore.</p> <h2 id="i-am-the-badrap-user"><a href="#i-am-the-badrap-user" class="header-anchor">#</a> I am the Badrap user</h2> <p>Install the Google Cloud Platform app.</p> <ol><li><p>Open the <a href="https://badrap.io/apps/gcp" target="_blank" rel="noopener noreferrer">Google Cloud Platform app page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in Badrap and click the <strong>Install</strong> button.</p></li> <li><p>The app will need your consent to <em>create and manage assets</em> under your Badrap user account. Click Install the app to give your consent.</p></li></ol> <div style="text-align:center;"><img src="/assets/img/gcp-50-permissions.532312d1.png"></div> <ol start="3"><li>Click the <strong>Add a new account</strong> button. Upload the JSON key file you received or downloaded. Remember to delete the local file once the installation is finished and working.</li></ol> <div style="text-align:center;"><img src="/assets/img/gcp-60-add-account.0e96dd25.png" style="max-width:95%;width:480px;"></div> <ol start="4"><li>Congratulations! You are all done. Check the <a href="https://badrap.io/assets" target="_blank" rel="noopener noreferrer">My assets page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and find the section <em>Google Cloud Platform</em> from your asset list. You should see your public IP-addresses. If your DNS records are also under your GCP project, you should see your domain names in the list too.</li></ol> <div style="text-align:center;"><img src="/assets/img/gcp-70-my-assets.f84f767d.png" style="max-width:95%;width:480px;"></div> <h2 id="uninstalling-the-app"><a href="#uninstalling-the-app" class="header-anchor">#</a> Uninstalling the app</h2> <ol><li>Open the <a href="https://badrap.io/apps/gcp" target="_blank" rel="noopener noreferrer">Google Cloud Platform app page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and click <strong>Uninstall</strong>.</li> <li>Go to <a href="https://console.cloud.google.com/iam-admin/serviceaccounts" target="_blank" rel="noopener noreferrer">Service accounts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in your Google Cloud Platform console.</li> <li>Select the project whose assets you have been following with the Badrap GCP app.</li> <li>Search for the service account you created earlier for the Badrap GCP app and select <strong>Delete</strong> from the Actions menu on the right.</li></ol> <div style="text-align:center;"><img src="/assets/img/gcp-90-delete-service-account.e2e9a283.png"></div> <ol start="5"><li>You have now successfully uninstalled the app and cleaned up its configuration from your GCP installation.</li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/badrap/docs.badrap.io/edit/main/docs/apps/gcp.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2180d51d.js" defer></script><script src="/assets/js/2.0369854c.js" defer></script><script src="/assets/js/5.adc7a5bc.js" defer></script>
  </body>
</html>
